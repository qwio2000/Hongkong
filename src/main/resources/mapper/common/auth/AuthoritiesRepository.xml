<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeiglobal.hk.repository.common.auth.AuthoritiesRepository">
	<select id="findMemberById" parameterType="java.lang.String" resultType="com.jeiglobal.hk.domain.auth.LoginInfo">
		SELECT userId, userPasswd, statusCD, deptCD, deptName, empKey, userFirstName, userLastName, jisaCD, userType, userLevel, encodeCookie 
		FROM globalbiz.Users 
		WHERE userId = #{memberId} AND statusCD = '1'
	</select>
	
	<select id="findPermissionById" parameterType="java.lang.String" resultType="com.jeiglobal.hk.domain.auth.Authority">
		SELECT * FROM globalbiz.MenuAuthority WHERE userId = #{memberId}
	</select>
	
	<update id="updateEncodeCookieById" parameterType="hashMap">
		UPDATE globalbiz.Users SET encodeCookie = #{encodeCookie} WHERE userId = #{memberId}
	</update>
	
	<select id="countMemberByIdAndEncodeCookie" parameterType="hashMap" resultType="long">
		SELECT count(userId) FROM globalbiz.Users WHERE userId = #{memberId} AND encodeCookie = #{encodeCookie}
	</select>
</mapper>