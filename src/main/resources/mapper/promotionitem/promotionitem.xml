<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeiglobal.hk.repository.promotionitem.PromotionitemRepository">
	
	<!-- 지사/가맹 판촉물 리스트. 지사별로 보이도록 지사 코드 받아오기. -->
	<select id="promotionitemList" resultType="com.jeiglobal.hk.domain.promotionitem.PromotionItem" parameterType="String">
		SELECT A.itemCD,A.jisaCD,A.itemName,A.itemDescription,A.itemColor,A.itemPrice,A.itemUOM,A.itemStock,A.itemfile1Name
				,A.itemfile1NameConvert,A.itemfile1Size,A.itemfile1Url,A.itemfile1Ext,A.itemfile2Name,A.itemfile2NameConvert
				,A.itemfile2Size,A.itemfile2Url,A.itemfile2Ext,A.itemfile3Name,A.itemfile3NameConvert,A.itemfile3Size
				,A.itemfile3Url,A.itemfile3Ext,A.itemVisible,A.regDate,A.regID,A.updDate,A.updID, B.aidx
		FROM globalbiz.IvnPromotionItemMst AS A
		LEFT JOIN globalbiz.IvnPromotionItemOrderMst AS B
		ON A.itemCD = B.itemidx
		WHERE A.jisaCD = #{jisaCD}
	</select>
	
	<!-- 지사에서 판촉물 추가 쿼리  -->
	<insert id="promotionitemAdd" parameterType="com.jeiglobal.hk.domain.promotionitem.PromotionItem" keyProperty="itemcd">
		INSERT INTO globalbiz.IvnPromotionItemMst
		(jisaCD,itemName,itemDescription,itemColor,itemPrice,itemUOM,itemStock,itemfile1Name
		,itemfile1NameConvert,itemfile1Size,itemfile1Url,itemfile1Ext,itemfile2Name,itemfile2NameConvert
		,itemfile2Size,itemfile2Url,itemfile2Ext,itemfile3Name,itemfile3NameConvert,itemfile3Size
		,itemfile3Url,itemfile3Ext,itemVisible,regDate,regID,updDate,updID) 
		VALUES
		( #{jisaCD},#{itemName},#{itemDescription},#{itemColor},#{itemPrice},#{itemUOM},#{itemStock},#{itemfile1Name},
		#{itemfile1NameConvert},#{itemfile1Size},#{itemfile1Url},#{itemfile1Ext},#{itemfile2Name},#{itemfile2NameConvert},
		#{itemfile2Size},#{itemfile2Url},#{itemfile2Ext},#{itemfile3Name},#{itemfile3NameConvert},#{itemfile3Size},
		#{itemfile3Url},#{itemfile3Ext},#{itemVisible},NOW(),#{regID},#{updDate},#{updID} )
	</insert>

	<!-- 판촉물정보 한개만 가져오기. -->
	<select id="promotionitemOne" resultType="com.jeiglobal.hk.domain.promotionitem.PromotionItem" parameterType="int">
		SELECT itemCD,jisaCD,itemName,itemDescription,itemColor,itemPrice,itemUOM,itemStock,itemfile1Name
				,itemfile1NameConvert,itemfile1Size,itemfile1Url,itemfile1Ext,itemfile2Name,itemfile2NameConvert
				,itemfile2Size,itemfile2Url,itemfile2Ext,itemfile3Name,itemfile3NameConvert,itemfile3Size
				,itemfile3Url,itemfile3Ext,itemVisible,regDate,regID,updDate,updID 
		FROM globalbiz.IvnPromotionItemMst
		WHERE itemCD = #{itemCD}
	</select>
	
	<!-- 판촉물 수정하기. -->
	<update id="promotionitemUpdate" parameterType="com.jeiglobal.hk.domain.promotionitem.PromotionItem">
		UPDATE globalbiz.IvnPromotionItemMst
		SET itemName = #{itemName} , itemDescription = #{itemDescription} , itemColor = #{itemColor} , itemPrice = #{itemPrice}
			, itemUOM = #{itemUOM} , itemStock = #{itemStock} ,itemVisible = #{itemVisible}
			, itemfile1Name = #{itemfile1Name} , itemfile1NameConvert = #{itemfile1NameConvert}
			, itemfile1Size = #{itemfile1Size} , itemfile1Url = #{itemfile1Url} , itemfile1Ext = #{itemfile1Ext} 
			, itemfile2Name = #{itemfile2Name} , itemfile2NameConvert = #{itemfile2NameConvert}
			, itemfile2Size = #{itemfile2Size} , itemfile2Url = #{itemfile2Url} , itemfile2Ext = #{itemfile2Ext} 
			, itemfile3Name = #{itemfile3Name} , itemfile3NameConvert = #{itemfile3NameConvert}
			, itemfile3Size = #{itemfile3Size} , itemfile3Url = #{itemfile3Url} , itemfile3Ext = #{itemfile3Ext} 
			, updDate = NOW(), updID = #{updID}
		WHERE itemCD = #{itemCD} 
	</update>
	
	<!-- 판촉물 삭제하기. -->
	<delete id="promotionitemdelete" parameterType="int">
		DELETE FROM globalbiz.IvnPromotionItemMst
		WHERE itemCD = #{itemCD}  
	</delete>
	
	<!-- 판촉물 히스토리 남기기. -->
	<insert id="promotionitemhisins" parameterType="com.jeiglobal.hk.domain.promotionitem.PromotionItem" >
		INSERT INTO globalbiz.IvnPromotionItemMstHis
		(itemCD,jisaCD,itemName,itemDescription,itemColor,itemPrice,itemUOM,itemStock,itemfile1Name
		,itemfile1NameConvert,itemfile1Size,itemfile1Url,itemfile1Ext,itemfile2Name,itemfile2NameConvert
		,itemfile2Size,itemfile2Url,itemfile2Ext,itemfile3Name,itemfile3NameConvert,itemfile3Size
		,itemfile3Url,itemfile3Ext,itemVisible,regDate,regID,updDate,updID) 
		VALUES
		( #{itemCD}, #{jisaCD},#{itemName},#{itemDescription},#{itemColor},#{itemPrice},#{itemUOM},#{itemStock},#{itemfile1Name},
		#{itemfile1NameConvert},#{itemfile1Size},#{itemfile1Url},#{itemfile1Ext},#{itemfile2Name},#{itemfile2NameConvert},
		#{itemfile2Size},#{itemfile2Url},#{itemfile2Ext},#{itemfile3Name},#{itemfile3NameConvert},#{itemfile3Size},
		#{itemfile3Url},#{itemfile3Ext},#{itemVisible},#{regDate},#{regID},#{updDate},#{updID} )
	</insert>
	

</mapper>
