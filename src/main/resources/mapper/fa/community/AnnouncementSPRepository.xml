<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeiglobal.hk.repository.fa.community.AnnouncementSPRepository">
	<select id="findTotalArticleCount" statementType="CALLABLE" resultType="int">
		CALL globalbiz.SPAnnouncementTotalCount(#{searchField},#{searchValue})
	</select>
	
	<select id="findAnnouncements" statementType="CALLABLE" parameterType="hashMap" resultType="com.jeiglobal.hk.domain.community.Announcement">
		CALL globalbiz.SPAnnouncementList(#{searchField},#{searchValue}, #{startRow}, #{endRow})
	</select>
	
	<select id="findAnnouncement" statementType="CALLABLE" parameterType="int" resultType="com.jeiglobal.hk.domain.community.Announcement">
		CALL globalbiz.SPAnnouncement(#{idx})
	</select>
	
	<select id="updateAnnouncementReadCount" statementType="CALLABLE" parameterType="int">
		CALL globalbiz.SPAnnouncementReadcountUpdate(#{idx})
	</select>
	
	<select id="insertAnnouncement" statementType="CALLABLE" parameterType="com.jeiglobal.hk.domain.community.Announcement" resultType="int">
		CALL SPAnnouncementInsert(#{memberId}, #{boardSubject}, #{boardContent})
	</select>
	
	<select id="deleteAnnouncement">
		CALL globalbiz.SPAnnouncementDelete(#{idx})
	</select>
	
	<select id="updateAnnouncement" parameterType="hashMap">
		CALL globalbiz.SPAnnouncementUpdate(#{idx},#{announcement.boardSubject},#{announcement.boardContent})
	</select>
	
	<select id="insertAttachFile" parameterType="com.jeiglobal.hk.domain.community.AttachFile">
		CALL globalbiz.SPAnnouncementAttachFileInsert(#{boardIdx},#{fileOriginalName},#{fileName},#{fileSize},#{fileUrl},#{fileExt},#{fileDownloadCount})
	</select>
	
	<select id="findAttachFiles" parameterType="int" resultType="com.jeiglobal.hk.domain.community.AttachFile">
		CALL globalbiz.SPAnnouncementAttachFiles(#{idx})
	</select>
	
	<select id="updateFileDownloadCount" parameterType="int">
		CALL globalbiz.SPAnnouncementAttachFileUpdateDownloadCnt(#{fileIdx})
	</select>
	
	<select id="findAttachFile" parameterType="int" resultType="com.jeiglobal.hk.domain.community.AttachFile">
		CALL globalbiz.SPAnnouncementAttachFile(#{fileIdx})
	</select>
	
	<select id="deleteAttachFileByFileIdx" parameterType="int">
		CALL globalbiz.SPAnnouncementAttachFileDelete(#{fileIdx})
	</select>
	
	<select id="insertComment" parameterType="hashMap">
		CALL globalbiz.SPAnnouncementCommentInsert(#{idx}, #{memberId}, #{content})
	</select>
	
	<select id="findCommentsByIdx" parameterType="int" resultType="com.jeiglobal.hk.domain.community.Comment">
		CALL globalbiz.SPAnnouncementComments(#{idx})
	</select>
	
	<select id="deleteCommentByCommentIdx" parameterType="int">
		CALL globalbiz.SPAnnouncementCommentDelete(#{commentIdx})
	</select>
	
	<select id="deleteCommentByBoardIdx" parameterType="int">
		CALL globalbiz.SPAnnouncementCommentDeleteByBoardIdx(#{idx})
	</select>
</mapper>